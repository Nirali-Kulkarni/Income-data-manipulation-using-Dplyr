# Income-data-manipulation-using-Dplyr

#Income Dataset used contains income generated by states from year 2002 to 2015


#Clear the environment
rm(list=ls())

#First install dplyr package in R
install.packages("dplyr")
library(dplyr)

#Read csv file having income data from the year 2002 to 2015
mydata <- read.csv("income_data.csv")
mydata

#returning random 3 rows
sample_n(mydata,3)




<img width="476" alt="image" src="https://user-images.githubusercontent.com/114110996/218856299-6f36fb20-5724-46f1-85fa-955d77138d28.png">





#records wherein column state contains 'Ar' in their name
mydata12 = filter(mydata, grepl("Ar", State))
mydata12


<img width="479" alt="image" src="https://user-images.githubusercontent.com/114110996/218860726-078e8385-f4e2-4975-abad-b1ee21764564.png">





#calculating mean and median for the variable Y2015
summarise(mydata, Y2015_mean = mean(Y2015), Y2015_med=median(Y2015))



<img width="455" alt="image" src="https://user-images.githubusercontent.com/114110996/218857124-e8d1c530-7d4a-418e-a6b1-4038a75e04f8.png">




#number of records, mean and median for variables Y2005 and Y2006
summarise_at(mydata, vars(Y2005, Y2006), list(~n(), ~mean(.), ~median(.)))



<img width="479" alt="image" src="https://user-images.githubusercontent.com/114110996/218857572-75961b9d-7061-45f8-b66f-f528e75e4647.png">



#removing NA records from above summary
summarise_at(mydata, vars(Y2011, Y2012),
             list(~n(), missing = ~sum(is.na(.)), ~mean(., na.rm = TRUE),
                  ~median(.,na.rm = TRUE)))
                  
                  
<img width="462" alt="image" src="https://user-images.githubusercontent.com/114110996/218858207-31a28ff1-3dcf-4411-89a2-b9d89d6b6b22.png">






#10 random observations of two variables "Index" "State" 
dt = mydata %>% select(Index, State) %>% sample_n(10)
dt




<img width="390" alt="image" src="https://user-images.githubusercontent.com/114110996/218858810-46373cf7-a830-41b6-a0d7-6d862eca77a5.png">



#State that generated highest income among the variable 'Index'
out = mydata %>% group_by(Index) %>% filter(min_rank(desc(Y2015)) == 1) %>%
  select(Index, State, Y2015)
out




<img width="486" alt="image" src="https://user-images.githubusercontent.com/114110996/218859413-e4d6c3c4-75dd-4a4c-8dfd-830a3e256c3f.png">



#Joins
df1 = data.frame(ID = c(1, 2, 3, 4, 5),
                 w = c('a', 'b', 'c', 'd', 'e'),
                 x = c(1, 1, 0, 0, 1),
                 y=rnorm(5),
                 z=letters[1:5])
df2 = data.frame(ID = c(1, 7, 3, 6, 8),
                 a = c('z', 'b', 'k', 'd', 'l'),
                 b = c(1, 2, 3, 0, 4),
                 c =rnorm(5),
                 d =letters[2:6])
#inner join

df3 = inner_join(df1, df2, by = "ID")
df3




<img width="346" alt="image" src="https://user-images.githubusercontent.com/114110996/218859703-3d47c7ae-9c66-48e2-82eb-6a14999abd0f.png">





#left join
df4=left_join(df1, df2, by = "ID")
df4



<img width="362" alt="image" src="https://user-images.githubusercontent.com/114110996/218859911-559f6b0e-9772-403e-9ead-55f2b9926598.png">
